# PracticalMachineLearning-Prediction Assignment Writeup
Preparation
--------------------------------
For this assignment, i choose to use caret and randomForest packages. First let us install the necessary packages. I also set a seed value for consistent result.

```{r}
library(caret)
library(randomForest)
library("rpart")
set.seed(9999)
```
Import the data
--------------------------------
I import the training/testing data from the link in the assignment. Some values contained "#DIV/0!" or "NA". I interpret these value as NA value.

```{r}
setwd("/Users/dingd/Desktop/machine_learning")
trainingdata <- read.csv("pml-training.csv", na.strings = c("NA", "#DIV/0!"))
testingdata<-read.csv("pml-testing.csv",na.strings=c("NA","#DIV/0!"))
dim(trainingdata)
dim(testingdata)
```
```{r}
dim(trainingdata)
```
> 19622   160

```{r}
dim(testingdata)
```
>  20 160

Cleaning the data
--------------------------------
I chose a feature set that only included complete columns. There are 154 variables, then i exclueded variables with  at least one “NA”.Variables related to time and user information were excluded.
```{r}
trainingdata<- trainingdata[colSums(!is.na(trainingdata)) > 0]
dim(trainingdata)
```
> 19622   154

```{r}
trainingdata<- trainingdata[colSums(is.na(trainingdata)) == 0]
dim(trainingdata)

```
> 19622   60

```{r}
## variables with user information, time and undefined
trainingdata<-trainingdata[,-c(1:7)]
dim(trainingdata2)
```
> 19622    53

The same data cleaning for testing dataset.
```{r}
testingdata <-testingdata[,colSums(is.na(testing)) == 0]
testingdata <-testingdata[,-c(1:7)]
```
Cross-validation
--------------------------------
In this section cross-validation will be performed by splitting the training data in training (75%) and testing (25%) data.
```{r}
subSamples <- createDataPartition(y=trainingdata$classe, p=0.75, list=FALSE)
subTraining <- training[subSamples, ] 
subTesting <- training[-subSamples, ]
```

Modelling
--------------------------------
In this section a decision tree and random forest will be applied to the data.

```{r}
model=randomForest(classe~., data=trainingdata2, method='class')
pred=predict(model,testingdata, type='class')
z=confusionMatrix(pred,subTesting$classe)
save(z,file='test.RData')
```
